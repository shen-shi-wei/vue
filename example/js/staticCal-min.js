function curentDataCal(g,a){if(a.length==0){return[]}var b=[];var f=a[a.length-1];b.push({t1:"\u5f53\u524d\u65f6\u95f4",t2:"\u5f53\u524d\u65f6\u95f4",t3:f.sampleTime+""});b.push({t1:"\u5f53\u524d\u8bfb\u6570",t2:"\u5b9e\u6d4b\u8377\u8f7d",t3:toDecimal(parseFloat(f.realLoading),1,true)});b.push({t1:"\u5f53\u524d\u8bfb\u6570",t2:"\u5b9e\u6d4b\u6cb9\u538b",t3:toDecimal(parseFloat(f.realPress),2,true)});var j="";var i="";var c="";var e="";if(null!=g.sensorUsed&&g.sensorUsed!=""&&null!=f.sensorValue&&f.sensorValue!=""){var k=g.sensorUsed.split(",");var h=g.sensorDirection.split(",");var l=f.sensorValue.split(",");k.forEach(function(m,d){if(parseInt(m)!=0){if(null!=l[d]&&parseFloat(l[d])!=-66){j+=toDecimal(parseFloat(l[d]),2,true)+"(mm),";c+="\u6b63\u5e38,";e+="\u662f,"}if(parseInt(h[d])==1){i+="\u6c89\u964d,"}else{if(parseInt(h[d])==2){i+="\u4e0a\u62d4,"}else{if(parseInt(h[d])==3){i+="\u5411\u4e0a,"}else{if(parseInt(h[d])==4){i+="\u5411\u4e0b,"}else{if(parseInt(h[d])==5){i+="\u6869\u9876,"}}}}}}});if(j!=""){j=j.substring(0,j.length-1)}if(i!=""){i=i.substring(0,i.length-1)}if(c!=""){c=c.substring(0,c.length-1)}if(i!=""){e=e.substring(0,e.length-1)}}b.push({t1:"\u5f53\u524d\u8bfb\u6570",t2:"\u5b9e\u6d4b\u4f4d\u79fb",t3:j});b.push({t1:"\u5f53\u524d\u8bfb\u6570",t2:"\u4f4d\u79fb\u901a\u9053\u7528\u9014",t3:i});b.push({t1:"\u5f53\u524d\u8bfb\u6570",t2:"\u4f4d\u79fb\u901a\u9053\u72b6\u6001",t3:c});b.push({t1:"\u6d4b\u8bd5\u8fdb\u7a0b",t2:"\u6d4b\u8bd5\u8fdb\u7a0b",t3:f.loadDirect==1?"\u52a0\u8f7d":"\u5378\u8f7d"});b.push({t1:"\u6d4b\u8bd5\u8fdb\u7a0b",t2:"\u5f53\u524d\u7ea7\u8bbe\u5b9a\u8377\u8f7d",t3:toDecimal(f.loading,1,true)+"("+getTestUnitName(g)+")"});b.push({t1:"\u6d4b\u8bd5\u8fdb\u7a0b",t2:"\u5f53\u524d\u52a0\u8f7d\u7b49\u7ea7",t3:f.currentGrade});b.push({t1:"\u6d4b\u8bd5\u8fdb\u7a0b",t2:"\u5f53\u524d\u7ea7\u8bfb\u6570\u6b21\u6570",t3:f.sampleCount});b.push({t1:"\u6d4b\u8bd5\u8fdb\u7a0b",t2:"\u524d\u6b21\u8bfb\u6570\u65f6\u95f4",t3:a[a.length-2].sampleTime+""});b.push({t1:"\u6d4b\u8bd5\u8fdb\u7a0b",t2:"\u5f53\u524d\u7ea7\u5df2\u6d4b\u65f6\u95f4",t3:f.timeCount});b.push({t1:"\u6d4b\u8bd5\u8fdb\u7a0b",t2:"\u4f4d\u79fb\u901a\u9053\u53c2\u4e0e\u5e73\u5747",t3:e});return b}function detailDataCal(n,t){var c={header:[],data:[]};var e=getTestUnitName(n);if(n.testType==1){c.header.push({lable:"\u63a7\u8f7d("+e+")",name:"loading"});c.header.push({lable:"\u95f4\u9694\u65f6\u95f4(min)",name:"timeCount"});c.header.push({lable:"\u8377\u8f7d("+e+")",name:"realLoading"});c.header.push({lable:"\u6cb9\u538b(MPa)",name:"realPress"});c.header.push({lable:"\u8bb0\u5f55\u65f6\u95f4",name:"sampleTime"});c.header.push({lable:"\u63a5\u6536\u65f6\u95f4",name:"createTime"})}else{if(n.testType==2||n.testType==3){c.header.push({lable:"\u63a7\u8f7d("+e+")",name:"loading"});c.header.push({lable:"\u95f4\u9694\u65f6\u95f4(min)",name:"timeCount"});c.header.push({lable:"\u8377\u8f7d("+e+")",name:"realLoading"});c.header.push({lable:"\u6cb9\u538b(MPa)",name:"realPress"});c.header.push({lable:"\u8bb0\u5f55\u65f6\u95f4",name:"sampleTime"});c.header.push({lable:"\u63a5\u6536\u65f6\u95f4",name:"createTime"})}else{if(n.testType==4||n.testType==12){c.header.push({lable:"\u63a7\u8f7d("+e+")",name:"loading"});c.header.push({lable:"\u95f4\u9694\u65f6\u95f4(min)",name:"timeCount"});c.header.push({lable:"\u8377\u8f7d("+e+")",name:"realLoading"});c.header.push({lable:"\u6cb9\u538b(MPa)",name:"realPress"});c.header.push({lable:"\u8bb0\u5f55\u65f6\u95f4",name:"sampleTime"});c.header.push({lable:"\u63a5\u6536\u65f6\u95f4",name:"createTime"})}else{if(n.testType==11){c.header.push({lable:"\u63a7\u8f7d("+e+")",name:"loading"});c.header.push({lable:"\u52a0\u8f7d(\u2191)/\u5378\u8f7d(\u2193)",name:"loopCount"});c.header.push({lable:"\u95f4\u9694\u65f6\u95f4(min)",name:"timeCount"});c.header.push({lable:"\u8377\u8f7d("+e+")",name:"realLoading"});c.header.push({lable:"\u6cb9\u538b(MPa)",name:"realPress"});c.header.push({lable:"\u8bb0\u5f55\u65f6\u95f4",name:"sampleTime"});c.header.push({lable:"\u63a5\u6536\u65f6\u95f4",name:"createTime"})}else{c.header.push({lable:"\u63a7\u8f7d("+e+")",name:"loading"});c.header.push({lable:"\u95f4\u9694\u65f6\u95f4(min)",name:"timeCount"});c.header.push({lable:"\u8377\u8f7d("+e+")",name:"realLoading"});c.header.push({lable:"\u6cb9\u538b(MPa)",name:"realPress"});c.header.push({lable:"\u8bb0\u5f55\u65f6\u95f4",name:"sampleTime"});c.header.push({lable:"\u63a5\u6536\u65f6\u95f4",name:"createTime"})}}}}if(null!=n.sensorUsed&&n.sensorUsed!=""){var j=n.sensorUsed.split(",");var r=n.sensorDirection.split(",");var i=[];var a=[];var q=[];var f=[];var b=[];j.forEach(function(u,d){if(parseInt(u)!=0){if(parseInt(r[d])==1){i.push({lable:"\u8868"+(d+1),name:"d"+(d+1)})}else{if(parseInt(r[d])==2){a.push({lable:"\u8868"+(d+1),name:"u"+(d+1)})}else{if(parseInt(r[d])==3){f.push({lable:"\u8868"+(d+1),name:"u"+(d+1)})}else{if(parseInt(r[d])==4){q.push({lable:"\u8868"+(d+1),name:"d"+(d+1)})}else{if(parseInt(r[d])==5){b.push({lable:"\u8868"+(d+1),name:"t"+(d+1)})}}}}}}});if(i.length>0){c.header.push({lable:"\u6c89\u964d(mm)",name:"",children:i})}if(a.length>0){c.header.push({lable:"\u4e0a\u62d4(mm)",name:"",children:a})}if(f.length>0){c.header.push({lable:"\u5411\u4e0a\u4f4d\u79fb(mm)",name:"",children:f})}if(q.length>0){c.header.push({lable:"\u5411\u4e0b\u4f4d\u79fb(mm)",name:"",children:q})}if(b.length>0){c.header.push({lable:"\u6869\u9876\u4f4d\u79fb(mm)",name:"",children:b})}}if(n.testType==1){var k=[];k.push({lable:"\u672c\u6b21",name:"oned"});k.push({lable:"\u7d2f\u8ba1",name:"totald"});k.push({lable:"\u672c\u7ea7",name:"leveld"});c.header.push({lable:"\u5e73\u5747\u6c89\u964d(mm)",name:"",children:k})}else{if(n.testType==2||n.testType==3){var k=[];k.push({lable:"\u672c\u6b21",name:"oneu"});k.push({lable:"\u7d2f\u8ba1",name:"totalu"});k.push({lable:"\u672c\u7ea7",name:"levelu"});c.header.push({lable:"\u5e73\u5747\u4e0a\u62d4(mm)",name:"",children:k})}else{if(n.testType==4){if(n.sensorDirection.indexOf("3")!=-1){var k=[];k.push({lable:"\u672c\u6b21",name:"oneu"});k.push({lable:"\u7d2f\u8ba1",name:"totalu"});k.push({lable:"\u672c\u7ea7",name:"levelu"});c.header.push({lable:"\u5e73\u5747\u5411\u4e0a\u4f4d\u79fb(mm)",name:"",children:k})}if(n.sensorDirection.indexOf("4")!=-1){var k=[];k.push({lable:"\u672c\u6b21",name:"oned"});k.push({lable:"\u7d2f\u8ba1",name:"totald"});k.push({lable:"\u672c\u7ea7",name:"leveld"});c.header.push({lable:"\u5e73\u5747\u5411\u4e0b\u4f4d\u79fb(mm)",name:"",children:k})}if(n.sensorDirection.indexOf("5")!=-1){var k=[];k.push({lable:"\u672c\u6b21",name:"onet"});k.push({lable:"\u7d2f\u8ba1",name:"totalt"});k.push({lable:"\u672c\u7ea7",name:"levelt"});c.header.push({lable:"\u5e73\u5747\u6869\u9876\u4f4d\u79fb(mm)",name:"",children:k})}}else{if(n.testType==11||n.testType==12){if(n.sensorDirection.indexOf("3")!=-1){var k=[];k.push({lable:"\u672c\u6b21",name:"oneu"});k.push({lable:"\u7d2f\u8ba1",name:"totalu"});k.push({lable:"\u672c\u7ea7",name:"levelu"});c.header.push({lable:"\u5e73\u5747\u5411\u4e0a\u4f4d\u79fb(mm)",name:"",children:k})}if(n.sensorDirection.indexOf("4")!=-1){var k=[];k.push({lable:"\u672c\u6b21",name:"oned"});k.push({lable:"\u7d2f\u8ba1",name:"totald"});k.push({lable:"\u672c\u7ea7",name:"leveld"});c.header.push({lable:"\u5e73\u5747\u5411\u4e0b\u4f4d\u79fb(mm)",name:"",children:k})}}else{var k=[];k.push({lable:"\u672c\u6b21",name:"oned"});k.push({lable:"\u7d2f\u8ba1",name:"totald"});k.push({lable:"\u672c\u7ea7",name:"leveld"});c.header.push({lable:"\u5e73\u5747\u6c89\u964d(mm)",name:"",children:k})}}}}var s=0;var o=0;var h=0;var p=-66;var g=0;var m=0;var l=0;t.forEach(function(G,F){var y={};y.id=G.id;y.loadDirect=G.loadDirect;y.sampleCount=G.sampleCount;if(n.testType==1){y.loading=toDecimal(G.loading,1,true);y.timeCount=G.timeCount;y.realLoading=toDecimal(G.realLoading,1,true);y.realPress=toDecimal(G.realPress,2,true);y.sampleTime=(G.sampleTime+"").substring(0,16);y.createTime=(G.createTime+"").substring(0,16)}else{if(n.testType==2||n.testType==3){y.loading=toDecimal(G.loading,1,true);y.timeCount=G.timeCount;y.realLoading=toDecimal(G.realLoading,1,true);y.realPress=toDecimal(G.realPress,2,true);y.sampleTime=(G.sampleTime+"").substring(0,16);y.createTime=(G.createTime+"").substring(0,16)}else{if(n.testType==4||n.testType==12){y.loading=toDecimal(G.loading,1,true);y.timeCount=G.timeCount;y.realLoading=toDecimal(G.realLoading,1,true);y.realPress=toDecimal(G.realPress,2,true);y.sampleTime=(G.sampleTime+"").substring(0,16);y.createTime=(G.createTime+"").substring(0,16)}else{if(n.testType==11){y.loading=toDecimal(G.loading,1,true);var z=G.loadDirect;var E=G.sampleCount;var D="";if(z==1){D=E+"\u2191"}else{if(z==0){D=E+"\u2193"}}y.loopCount=D;y.timeCount=G.timeCount;y.realLoading=toDecimal(G.realLoading,1,true);y.realPress=toDecimal(G.realPress,2,true);y.sampleTime=(G.sampleTime+"").substring(0,16);y.createTime=(G.createTime+"").substring(0,16)}else{y.loading=toDecimal(G.loading,1,true);y.timeCount=G.timeCount;y.realLoading=toDecimal(G.realLoading,1,true);y.realPress=toDecimal(G.realPress,2,true);y.sampleTime=(G.sampleTime+"").substring(0,16);y.createTime=(G.createTime+"").substring(0,16)}}}}var I=G.sensorValue.split(",");var B=n.sensorDirection.split(",");I.forEach(function(v,d){if(parseFloat(v)!=-66){if(parseInt(B[d])==1){y["d"+(d+1)]=toDecimal(v,2,true)}else{if(parseInt(B[d])==2){y["u"+(d+1)]=toDecimal(v,2,true)}else{if(parseInt(B[d])==3){y["u"+(d+1)]=toDecimal(v,2,true)}else{if(parseInt(B[d])==4){y["d"+(d+1)]=toDecimal(v,2,true)}else{if(parseInt(B[d])==5){y["t"+(d+1)]=toDecimal(v,2,true)}}}}}}});if(n.testType==1){var C=Math.round(G.average*100)/100;var x=Math.round((C-g)*100)/100;y.totald=toDecimal(C,2,true);y.oned=toDecimal(x,2,true);if(p==Math.round(G.loading)){s=Math.round((x+s)*100)/100}else{s=x;p=Math.round(G.loading)}y.leveld=toDecimal(s,2,true);g=C}else{if(n.testType==2||n.testType==3){var A=Math.round(G.average*100)/100;var w=Math.round((A-m)*100)/100;y.totalu=toDecimal(A,2,true);y.oneu=toDecimal(w,2,true);if(p==Math.round(G.loading)){o=Math.round((w+o)*100)/100}else{o=w;p=Math.round(G.loading)}y.levelu=toDecimal(o,2,true);m=A}else{if(n.testType==4){var A=Math.round(G.average*100)/100;var w=Math.round((A-m)*100)/100;y.totalu=toDecimal(A,2,true);y.oneu=toDecimal(w,2,true);var C=Math.round((G.downAverage==null?0:G.downAverage)*100)/100;var x=Math.round((C-g)*100)/100;y.totald=toDecimal(C,2,true);y.oned=toDecimal(x,2,true);var u=Math.round((G.topAverage==null?0:G.topAverage)*100)/100;var H=Math.round((u-l)*100)/100;y.totalt=toDecimal(u,2,true);y.onet=toDecimal(H,2,true);if(p==Math.round(G.loading)){o=Math.round((w+o)*100)/100;s=Math.round((x+s)*100)/100;h=Math.round((H+h)*100)/100}else{o=w;s=x;h=H;p=Math.round(G.loading)}y.levelu=toDecimal(o,2,true);y.leveld=toDecimal(s,2,true);y.levelt=toDecimal(h,2,true);m=A;g=C;l=u}else{if(n.testType==11){var A=Math.round(G.average*100)/100;var w=Math.round((A-m)*100)/100;y.totalu=toDecimal(A,2,true);y.oneu=toDecimal(w,2,true);var C=Math.round((G.downAverage==null?0:G.downAverage)*100)/100;var x=Math.round((C-g)*100)/100;y.totald=toDecimal(C,2,true);y.oned=toDecimal(x,2,true);if(p==(Math.round(G.loading)+G.sampleCount+G.loadDirect+"")){o=Math.round((w+o)*100)/100;s=Math.round((x+s)*100)/100}else{o=w;s=x;p=(Math.round(G.loading)+G.sampleCount+G.loadDirect+"")}y.levelu=toDecimal(o,2,true);y.leveld=toDecimal(s,2,true);m=A;g=C}else{if(n.testType==12){var A=Math.round(G.average*100)/100;var w=Math.round((A-m)*100)/100;y.totalu=toDecimal(A,2,true);y.oneu=toDecimal(w,2,true);var C=Math.round((G.downAverage==null?0:G.downAverage)*100)/100;var x=Math.round((C-g)*100)/100;y.totald=toDecimal(C,2,true);y.oned=toDecimal(x,2,true);if(p==Math.round(G.loading)){o=Math.round((w+o)*100)/100;s=Math.round((x+s)*100)/100}else{o=w;s=x;p=Math.round(G.loading)}y.levelu=toDecimal(o,2,true);y.leveld=toDecimal(s,2,true);m=A;g=C}else{var C=Math.round(G.average*100)/100;var x=Math.round((C-g)*100)/100;y.totald=toDecimal(C,2,true);y.oned=toDecimal(x,2,true);if(p==Math.round(G.loading)){s=Math.round((x+s)*100)/100}else{s=x;p=Math.round(G.loading)}y.leveld=toDecimal(s,2,true);g=C}}}}}c.data.push(y)});return c}function totalDataCal(m,n){var g={header:[],data:[]};var o=getTestUnitName(m);if(m.testType==1){g.header.push({lable:"\u63a7\u8f7d("+o+")",name:"loading"});var k=[];k.push({lable:"\u672c\u7ea7",name:"time"});k.push({lable:"\u7d2f\u8ba1",name:"timeTotal"});if(k.length>0){g.header.push({lable:"\u5386\u65f6(min)",name:"",children:k})}var j=[];j.push({lable:"\u672c\u7ea7",name:"down"});j.push({lable:"\u7d2f\u8ba1",name:"downTotal"});if(j.length>0){g.header.push({lable:"\u6c89\u964d(mm)",name:"",children:j})}}else{if(m.testType==2||m.testType==3){g.header.push({lable:"\u63a7\u8f7d("+o+")",name:"loading"});var k=[];k.push({lable:"\u672c\u7ea7",name:"time"});k.push({lable:"\u7d2f\u8ba1",name:"timeTotal"});if(k.length>0){g.header.push({lable:"\u5386\u65f6(min)",name:"",children:k})}var j=[];j.push({lable:"\u672c\u7ea7",name:"up"});j.push({lable:"\u7d2f\u8ba1",name:"upTotal"});if(j.length>0){g.header.push({lable:"\u4e0a\u62d4(mm)",name:"",children:j})}}else{if(m.testType==4){g.header.push({lable:"\u63a7\u8f7d("+o+")",name:"loading"});var k=[];k.push({lable:"\u672c\u7ea7",name:"time"});k.push({lable:"\u7d2f\u8ba1",name:"timeTotal"});if(k.length>0){g.header.push({lable:"\u5386\u65f6(min)",name:"",children:k})}if(m.sensorDirection.indexOf("3")!=-1){var j=[];j.push({lable:"\u672c\u7ea7",name:"up"});j.push({lable:"\u7d2f\u8ba1",name:"upTotal"});if(j.length>0){g.header.push({lable:"\u5411\u4e0a\u4f4d\u79fb(mm)",name:"",children:j})}}if(m.sensorDirection.indexOf("4")!=-1){var j=[];j.push({lable:"\u672c\u7ea7",name:"down"});j.push({lable:"\u7d2f\u8ba1",name:"downTotal"});if(j.length>0){g.header.push({lable:"\u5411\u4e0b\u4f4d\u79fb(mm)",name:"",children:j})}}if(m.sensorDirection.indexOf("5")!=-1){}}else{if(m.testType==11){g.header.push({lable:"\u63a7\u8f7d("+o+")",name:"loading"});var k=[];k.push({lable:"\u672c\u7ea7",name:"time"});k.push({lable:"\u7d2f\u8ba1",name:"timeTotal"});if(k.length>0){g.header.push({lable:"\u5386\u65f6(min)",name:"",children:k})}g.header.push({lable:"\u5faa\u73af\u6b21\u6570",name:"sampleCount"});var j=[];if(m.sensorDirection.indexOf("3")!=-1){j.push({lable:"\u5411\u4e0a",name:"upTotal1"})}if(m.sensorDirection.indexOf("4")!=-1){j.push({lable:"\u5411\u4e0b",name:"downTotal1"})}if(j.length>0){g.header.push({lable:"\u52a0\u8f7d\u4f4d\u79fb(mm)",name:"",children:j})}var i=[];if(m.sensorDirection.indexOf("3")!=-1){i.push({lable:"\u5411\u4e0a",name:"upTotal2"})}if(m.sensorDirection.indexOf("4")!=-1){i.push({lable:"\u5411\u4e0b",name:"downTotal2"})}if(i.length>0){g.header.push({lable:"\u5378\u8f7d\u4f4d\u79fb(mm)",name:"",children:i})}var h=[];var e=[];var c=[];e.push({lable:"\u672c\u7ea7",name:"down1"});e.push({lable:"\u7d2f\u8ba1",name:"downT1"});c.push({lable:"\u672c\u7ea7",name:"down2"});c.push({lable:"\u7d2f\u8ba1",name:"downT2"});h.push({lable:"\u52a0\u8f7d",name:"",children:e});h.push({lable:"\u5378\u8f7d",name:"",children:c});g.header.push({lable:"\u6c34\u5e73\u4f4d\u79fb(mm)",name:"",children:h});if(m.sensorDirection.indexOf("3")!=-1){g.header.push({lable:"\u52a0\u8f7d\u4e0a\u4e0b\u8868\u8bfb\u6570\u5dee(mm)",name:"offset"});g.header.push({lable:"\u8f6c\u89d2(\u00b0)",name:"angle"})}}else{if(m.testType==12){g.header.push({lable:"\u63a7\u8f7d("+o+")",name:"loading"});var k=[];k.push({lable:"\u672c\u7ea7",name:"time"});k.push({lable:"\u7d2f\u8ba1",name:"timeTotal"});if(k.length>0){g.header.push({lable:"\u5386\u65f6(min)",name:"",children:k})}if(m.sensorDirection.indexOf("3")!=-1){var j=[];j.push({lable:"\u672c\u7ea7",name:"up"});j.push({lable:"\u7d2f\u8ba1",name:"upTotal"});if(j.length>0){g.header.push({lable:"\u5411\u4e0a\u4f4d\u79fb(mm)",name:"",children:j})}}if(m.sensorDirection.indexOf("4")!=-1){var j=[];j.push({lable:"\u672c\u7ea7",name:"down"});j.push({lable:"\u7d2f\u8ba1",name:"downTotal"});if(j.length>0){g.header.push({lable:"\u5411\u4e0b\u4f4d\u79fb(mm)",name:"",children:j})}}if(m.sensorDirection.indexOf("3")!=-1){g.header.push({lable:"\u52a0\u8f7d\u4e0a\u4e0b\u8868\u8bfb\u6570\u5dee(mm)",name:"offset"});g.header.push({lable:"\u8f6c\u89d2(\u00b0)",name:"angle"})}}else{g.header.push({lable:"\u63a7\u8f7d("+o+")",name:"loading"});g.header.push({lable:"\u672c\u7ea7\u5386\u65f6(min)",name:"time"});g.header.push({lable:"\u7d2f\u8ba1\u5386\u65f6(min)",name:"timeTotal"});g.header.push({lable:"\u672c\u7ea7\u6c89\u964d(mm)",name:"down"});g.header.push({lable:"\u7d2f\u8ba1\u6c89\u964d(mm)",name:"downTotal"})}}}}}var q={};n.forEach(function(r,p){var s;if(r.loadDirect==1){s="v"+r.loading}else{s="u"+r.loading}q[s]=r});var l=0;var b=0;for(var d in q){var k={};if(m.testType==11){if(q[d].loadDirect==1){k.id=q[d].id;k.loadDirect=q[d].loadDirect;k.loading=q[d].loading;k.time=parseInt(q[d].timeCount);l+=parseInt(q[d].timeCount);k.timeTotal=l;k.sampleCount=q[d].sampleCount;k.upTotal1=q[d].totalu;k.downTotal1=q[d].totald;k.upTotal2=q["u"+q[d].loading].totalu;k.downTotal2=q["u"+q[d].loading].totald;k.downT1=q[d].totald;k.downT2=q["u"+q[d].loading].totald;k.down1=toDecimal((k.downT1-b),2,true);k.down2=toDecimal((k.downT2-b),2,true);b=k.downT2;k.offset=toDecimal((q[d].totalu-q[d].totald),2,true);var a=m.sensorDistance;if(null!=a&&a!=0){var f=(q[d].totalu-q[d].totald)/a;k.angle=toDecimal(((Math.atan(f))*180/Math.PI),2,true)}else{k.angle=toDecimal(((Math.atan(0))*180/Math.PI),2,true)}g.data.push(k)}}else{k.id=q[d].id;k.loadDirect=q[d].loadDirect;k.loading=q[d].loading;k.time=parseInt(q[d].timeCount);l+=parseInt(q[d].timeCount);k.timeTotal=l;if(m.testType==1){k.down=q[d].leveld;k.downTotal=q[d].totald}else{if(m.testType==2||m.testType==3){k.up=q[d].levelu;k.upTotal=q[d].totalu}else{if(m.testType==4){if(m.sensorDirection.indexOf("3")!=-1){k.up=q[d].levelu;k.upTotal=q[d].totalu}if(m.sensorDirection.indexOf("4")!=-1){k.down=q[d].leveld;k.downTotal=q[d].totald}if(m.sensorDirection.indexOf("5")!=-1){}}else{if(m.testType==12){if(m.sensorDirection.indexOf("3")!=-1){k.up=q[d].levelu;k.upTotal=q[d].totalu}if(m.sensorDirection.indexOf("4")!=-1){k.down=q[d].leveld;k.downTotal=q[d].totald}k.offset=toDecimal((q[d].totalu-q[d].totald),2,true);var a=m.sensorDistance;if(null!=a&&a!=0){var f=(q[d].totalu-q[d].totald)/a;k.angle=toDecimal(((Math.atan(f))*180/Math.PI),2,true)}else{k.angle=toDecimal(((Math.atan(0))*180/Math.PI),2,true)}}else{k.down=q[d].leveld;k.downTotal=q[d].totald}}}}g.data.push(k)}}return g}function loadOrUnloadDataCal(a,b,c){var e={header:[],data:[]};var g=[];var f=[];var h={};b.forEach(function(k,i){if(k.loadDirect==c){var j="v"+k.timeCount+Math.round(k.loading);if(a.testType==1){h[j+"d"]=k.totald}else{if(a.testType==2||a.testType==3){h[j+"u"]=k.totalu}else{if(a.testType==4){h[j+"d"]=k.totald;h[j+"u"]=k.totalu;h[j+"t"]=k.totalt}else{if(a.testType==11){h[j+"d"]=k.totald;h[j+"u"]=k.totalu}else{if(a.testType==12){h[j+"d"]=k.totald;h[j+"u"]=k.totalu}else{h[j+"d"]=k.totald}}}}}if(g.indexOf(k.timeCount)==-1){g.push(k.timeCount)}if(f.indexOf(Math.round(k.loading))==-1){f.push(Math.round(k.loading))}}});var d="("+getTestUnitName(a)+")";e.header.push({lable:"\u65f6\u95f4 (min)",name:"time"});f.forEach(function(j,i){if(a.testType==1){e.header.push({lable:"\u8377\u8f7d:"+j+d,name:j+"down"})}else{if(a.testType==2||a.testType==3){e.header.push({lable:"\u8377\u8f7d:"+j+d,name:j+"up"})}else{if(a.testType==4){var k=[];if(a.sensorDirection.indexOf("3")!=-1){k.push({lable:"\u5411\u4e0a",name:j+"up"})}if(a.sensorDirection.indexOf("4")!=-1){k.push({lable:"\u5411\u4e0b",name:j+"down"})}if(a.sensorDirection.indexOf("5")!=-1){}if(k.length>0){e.header.push({lable:"\u8377\u8f7d:"+j+d,name:"",children:k})}}else{if(a.testType==11){if(a.sensorDirection.indexOf("3")!=-1){e.header.push({lable:"\u8377\u8f7d:"+j+"\u5411\u4e0a"+d,name:j+"up"})}if(a.sensorDirection.indexOf("4")!=-1){e.header.push({lable:"\u8377\u8f7d:"+j+"\u5411\u4e0b"+d,name:j+"down"})}}else{if(a.testType==12){if(a.sensorDirection.indexOf("3")!=-1){e.header.push({lable:"\u8377\u8f7d:"+j+"\u5411\u4e0a"+d,name:j+"up"})}if(a.sensorDirection.indexOf("4")!=-1){e.header.push({lable:"\u8377\u8f7d:"+j+"\u5411\u4e0b"+d,name:j+"down"})}}else{e.header.push({lable:"\u8377\u8f7d:"+j+d,name:j+"down"})}}}}}});g.forEach(function(j,i){var k={};k.time=j;f.forEach(function(m,l){var n="v"+j+m;if(a.testType==1){k[m+"down"]=h[n+"d"]}else{if(a.testType==2||a.testType==3){k[m+"up"]=h[n+"u"]}else{if(a.testType==4){if(a.sensorDirection.indexOf("3")!=-1){k[m+"up"]=h[n+"u"]}if(a.sensorDirection.indexOf("4")!=-1){k[m+"down"]=h[n+"d"]}if(a.sensorDirection.indexOf("5")!=-1){k[m+"top"]=h[n+"t"]}}else{if(a.testType==11){k[m+"down"]=h[n+"d"];k[m+"up"]=h[n+"u"]}else{if(a.testType==12){k[m+"down"]=h[n+"d"];k[m+"up"]=h[n+"u"]}else{k[m+"down"]=h[n+"d"]}}}}}});e.data.push(k)});return e}function qsCurve(q,g,k){if(g.length==0){k.innerHTML="<font color='red'>\u6570\u636e\u4e0d\u8db3\uff0c\u65e0\u6cd5\u663e\u793a\u66f2\u7ebf</font>";k.setAttribute("_echarts_instance_","");return}var w={};g.forEach(function(p,n){var B;if(p.loadDirect==1){B="v"+p.loading}else{B="u"+p.loading}w[B]=p});var j=[[0,0]];var b=[[0,0]];var t=[];var u=[];for(var m in w){if(w[m].loadDirect==1){if(q.testType==1){j.push([w[m].loading,w[m].totald])}else{if(q.testType==2||q.testType==3){b.push([w[m].loading,w[m].totalu])}else{if(q.testType==4){b.push([w[m].loading,(-1)*w[m].totalu]);j.push([w[m].loading,w[m].totald])}else{if(q.testType==11||q.testType==12){j.push([w[m].loading,w[m].totald])}else{j.push([w[m].loading,w[m].totald])}}}}}else{if(q.testType==1){t.push([w[m].loading,w[m].totald])}else{if(q.testType==2||q.testType==3){u.push([w[m].loading,w[m].totalu])}else{if(q.testType==4){u.push([w[m].loading,(-1)*w[m].totalu]);t.push([w[m].loading,w[m].totald])}else{if(q.testType==11||q.testType==12){t.push([w[m].loading,w[m].totald])}else{t.push([w[m].loading,w[m].totald])}}}}}}t=t.reverse();t.push(j[j.length-1]);t=t.reverse();u=u.reverse();u.push(b[b.length-1]);u=u.reverse();var y=5;var v=getTestUnitName(q);var A=v=="kPa"?"p-s\u66f2\u7ebf":"Q-s\u66f2\u7ebf";var a=v=="kPa"?"p("+v+")":"Q("+v+")";var e="s (mm)";var h="mm";var f=true;if(q.testType==2||q.testType==3){A="U-\u03b4\u66f2\u7ebf";a="U("+v+")";e="\u03b4 (mm)";f=false}else{if(q.testType==11){A="H-t-YO\u66f2\u7ebf";a="t (h)";e="lgYO (mm)"}else{if(q.testType==12){A="H-YO\u66f2\u7ebf";a="H("+v+")";e="lgYO (mm)"}}}var r=[];if(q.testType==1){r.push({name:"\u52a0\u8f7d",type:"line",symbol:"circle",smooth:false,symbolSize:y,itemStyle:{normal:{color:"blue",lineStyle:{color:"blue"}}},data:j,tooltip:{formatter:function(n){return"\u52a0\u8f7d<br> "+n.data[0]+v+"&nbsp;&nbsp;"+n.data[1]+h}}});r.push({name:"\u5378\u8f7d",type:"line",symbol:"triangle",smooth:false,symbolSize:y,itemStyle:{normal:{color:"red",lineStyle:{color:"red"}}},data:t,tooltip:{formatter:function(n){return"\u5378\u8f7d<br> "+n.data[0]+v+"&nbsp;&nbsp;"+n.data[1]+h}}})}else{if(q.testType==2||q.testType==3){r.push({name:"\u52a0\u8f7d",type:"line",symbol:"circle",smooth:false,symbolSize:y,itemStyle:{normal:{color:"blue",lineStyle:{color:"blue"}}},data:b,tooltip:{formatter:function(n){return"\u52a0\u8f7d<br> "+n.data[0]+v+"&nbsp;&nbsp;"+n.data[1]+h}}});r.push({name:"\u5378\u8f7d",type:"line",symbol:"triangle",smooth:false,symbolSize:y,itemStyle:{normal:{color:"red",lineStyle:{color:"red"}}},data:u,tooltip:{formatter:function(n){return"\u5378\u8f7d<br> "+n.data[0]+v+"&nbsp;&nbsp;"+n.data[1]+h}}})}else{if(q.testType==4){r.push({name:"\u52a0\u8f7d\u5411\u4e0a",type:"line",symbol:"circle",smooth:false,symbolSize:y,itemStyle:{normal:{color:"blue",lineStyle:{color:"blue"}}},data:b,tooltip:{formatter:function(n){return"\u52a0\u8f7d\u5411\u4e0a<br> "+n.data[0]+v+"&nbsp;&nbsp;"+Math.abs(n.data[1])+h}}});r.push({name:"\u5378\u8f7d\u5411\u4e0a",type:"line",symbol:"triangle",smooth:false,symbolSize:y,itemStyle:{normal:{color:"red",lineStyle:{color:"red"}}},data:u,tooltip:{formatter:function(n){return"\u5378\u8f7d\u5411\u4e0a<br> "+n.data[0]+v+"&nbsp;&nbsp;"+Math.abs(n.data[1])+h}}});r.push({name:"\u52a0\u8f7d\u5411\u4e0b",type:"line",symbol:"circle",smooth:false,symbolSize:y,itemStyle:{normal:{color:"blue",lineStyle:{color:"blue"}}},data:j,tooltip:{formatter:function(n){return"\u52a0\u8f7d\u5411\u4e0b<br> "+n.data[0]+v+"&nbsp;&nbsp;"+n.data[1]+h}}});r.push({name:"\u5378\u8f7d\u5411\u4e0b",type:"line",symbol:"triangle",smooth:false,symbolSize:y,itemStyle:{normal:{color:"red",lineStyle:{color:"red"}}},data:t,tooltip:{formatter:function(n){return"\u5378\u8f7d\u5411\u4e0b<br> "+n.data[0]+v+"&nbsp;&nbsp;"+n.data[1]+h}}})}else{if(q.testType==11){var w={};g.forEach(function(p,n){var B=p.loading+""+p.sampleCount+"";if(p.loadDirect==1){B="v"+B}else{B="u"+B}w[B]=p});var j=[[0,0,0]];var i=q.loopCount;var s=(i*6)/60;var x=0;var o=0;for(var m in w){if(w[m].loading!=x){o++;x=w[m].loading}if(w[m].loadDirect==1){var c=((w[m].timeCount/(i*6))*s)+(o-1)*s;c=Math.round(c*100)/100;j.push([c,w[m].totald,w[m].loading]);var z=w["u"+w[m].loading+w[m].sampleCount];var l=((z.timeCount/(i*6))*s)+(o-1)*s;l=Math.round(l*100)/100;j.push([l,z.totald,z.loading])}}r.push({name:"\u52a0\u8f7d\u5411\u4e0b",type:"line",symbol:"circle",smooth:false,symbolSize:y,itemStyle:{normal:{color:"blue",lineStyle:{color:"blue"}}},data:j,tooltip:{formatter:function(n){return"H:"+parseFloat(n.data[2]).toFixed(1)+v+"&nbsp;&nbsp;Y0:"+parseFloat(n.data[1]).toFixed(2)+h}}})}else{if(q.testType==12){r.push({name:"\u52a0\u8f7d",type:"line",symbol:"circle",smooth:false,symbolSize:y,itemStyle:{normal:{color:"blue",lineStyle:{color:"blue"}}},data:j,tooltip:{formatter:function(n){return"H: "+n.data[0]+v+"&nbsp;&nbsp;Y0:"+n.data[1]+h}}});r.push({name:"\u5378\u8f7d",type:"line",symbol:"triangle",smooth:false,symbolSize:y,itemStyle:{normal:{color:"red",lineStyle:{color:"red"}}},data:t,tooltip:{formatter:function(n){return"H:  "+n.data[0]+v+"&nbsp;&nbsp;Y0:"+n.data[1]+h}}})}else{r.push({name:"\u52a0\u8f7d",type:"line",symbol:"circle",smooth:false,symbolSize:y,itemStyle:{normal:{color:"blue",lineStyle:{color:"blue"}}},data:j,tooltip:{formatter:function(n){return"\u52a0\u8f7d<br> "+parseFloat(n.data[0]).toFixed(1)+v+"&nbsp;&nbsp;"+parseFloat(n.data[1]).toFixed(2)+h}}});r.push({name:"\u5378\u8f7d",type:"line",symbol:"triangle",smooth:false,symbolSize:y,itemStyle:{normal:{color:"red",lineStyle:{color:"red"}}},data:t,tooltip:{formatter:function(n){return"\u52a0\u8f7d<br> "+parseFloat(n.data[0]).toFixed(1)+v+"&nbsp;&nbsp;"+parseFloat(n.data[1]).toFixed(2)+h}}})}}}}}var d=echarts.init(k);d.setOption({tooltip:{trigger:"item"},title:{text:A,left:"center"},animation:false,xAxis:{name:a,type:"value",nameLocation:"center",nameGap:25},yAxis:{name:e,axisLabel:{formatter:function(p,n){return Math.abs(p)}},inverse:f,type:"value",nameLocation:"center",nameGap:25},series:r},true)}function slgqCurve(m,g,k){if(g.length==0){k.innerHTML="<font color='red'>\u6570\u636e\u4e0d\u8db3\uff0c\u65e0\u6cd5\u663e\u793a\u66f2\u7ebf</font>";k.setAttribute("_echarts_instance_","");return}var q={};g.forEach(function(w,p){var x;if(w.loadDirect==1){x="v"+w.loading}else{x="u"+w.loading}q[x]=w});var j=[[0,0,0]];var b=[[0,0,0]];for(var l in q){if(q[l].loadDirect==1){if(m.testType==1){j.push([getBaseLog(10,q[l].loading),q[l].totald,q[l].loading])}else{if(m.testType==2||m.testType==3){b.push([getBaseLog(10,q[l].loading),q[l].totalu,q[l].loading])}else{if(m.testType==4){j.push([getBaseLog(10,q[l].loading),q[l].totald,q[l].loading]);b.push([getBaseLog(10,q[l].loading),(-1)*q[l].totalu,q[l].loading])}else{if(m.testType==11||m.testType==12){j.push([getBaseLog(10,q[l].loading),q[l].totald,q[l].loading]);b.push([getBaseLog(10,q[l].loading),(-1)*q[l].totalu,q[l].loading])}else{j.push([getBaseLog(10,q[l].loading),q[l].totald,q[l].loading])}}}}}}var s=5;var o=getTestUnitName(m);var v=o=="kPa"?"s-lgp\u66f2\u7ebf":"s-lgQ\u66f2\u7ebf";var a=o=="kPa"?"lgp("+o+")":"lgQ("+o+")";var c="s (mm)";var i="mm";var d=true;var e=false;if(m.testType==2||m.testType==3){v="\u03b4-lgU\u66f2\u7ebf";a="lgU("+o+")";c="\u03b4(mm)";d=false}else{if(m.testType==11||m.testType==12){v="H-\u25b3YO/\u25b3H\u66f2\u7ebf";a="H("+o+")";c="\u25b3YO/\u25b3H (mm/"+o+")";d=false;e=true}}var n=[];if(m.testType==1){n.push({name:"\u52a0\u8f7d",type:"line",symbol:"circle",smooth:false,symbolSize:s,itemStyle:{normal:{color:"blue",lineStyle:{color:"blue"}}},data:j,tooltip:{formatter:function(p){return"\u52a0\u8f7d<br> "+p.data[2]+o+"&nbsp;&nbsp;"+p.data[1]+i}}})}else{if(m.testType==2||m.testType==3){n.push({name:"\u52a0\u8f7d",type:"line",symbol:"circle",smooth:false,symbolSize:s,itemStyle:{normal:{color:"blue",lineStyle:{color:"blue"}}},data:b,tooltip:{formatter:function(p){return"\u52a0\u8f7d<br> "+p.data[2]+o+"&nbsp;&nbsp;"+p.data[1]+i}}})}else{if(m.testType==4){n.push({name:"\u52a0\u8f7d\u5411\u4e0a",type:"line",symbol:"circle",smooth:false,symbolSize:s,itemStyle:{normal:{color:"blue",lineStyle:{color:"blue"}}},data:b,tooltip:{formatter:function(p){return"\u52a0\u8f7d\u5411\u4e0a<br> "+p.data[2]+o+"&nbsp;&nbsp;"+Math.abs(p.data[1])+i}}});n.push({name:"\u52a0\u8f7d\u5411\u4e0b",type:"line",symbol:"triangle",smooth:false,symbolSize:s,itemStyle:{normal:{color:"red",lineStyle:{color:"red"}}},data:j,tooltip:{formatter:function(p){return"\u52a0\u8f7d\u5411\u4e0b<br> "+p.data[2]+o+"&nbsp;&nbsp;"+p.data[1]+i}}})}else{if(m.testType==11){var q={};g.forEach(function(w,p){var x=w.loading;q[x]=w});var r=0;var f=0;var j=[[0,0]];for(var l in q){var u=q[l].totald-f;var t=q[l].loading-r;if(q[l].loading!=r){r=q[l].loading;f=q[l].totald}j.push([q[l].loading,Math.round((u/t)*1000)/1000])}n.push({name:"\u52a0\u8f7d\u5411\u4e0b",type:"line",smooth:false,symbol:"circle",symbolSize:s,itemStyle:{normal:{color:"blue",lineStyle:{color:"blue"}}},data:j,tooltip:{formatter:function(p){return"H: "+parseFloat(p.data[0])+o+"&nbsp;&nbsp;Y0:"+p.data[1]+i}}})}else{if(m.testType==12){var q={};g.forEach(function(w,p){var x=w.loading;if(w.loadDirect==1){q[x]=w}});var r=0;var f=0;var j=[[0,0]];for(var l in q){var u=q[l].totald-f;var t=q[l].loading-r;if(q[l].loading!=r){r=q[l].loading;f=q[l].totald}j.push([q[l].loading,Math.round((u/t)*1000)/1000])}n.push({name:"\u52a0\u8f7d\u5411\u4e0b",type:"line",smooth:false,symbol:"circle",symbolSize:s,itemStyle:{normal:{color:"blue",lineStyle:{color:"blue"}}},data:j,tooltip:{formatter:function(p){return"H: "+parseFloat(p.data[0])+o+"&nbsp;&nbsp;Y0:"+p.data[1]+i}}})}else{n.push({name:"\u52a0\u8f7d",type:"line",symbol:"circle",smooth:false,symbolSize:s,itemStyle:{normal:{color:"blue",lineStyle:{color:"blue"}}},data:j,tooltip:{formatter:function(p){return"\u52a0\u8f7d<br> "+parseFloat(p.data[2]).toFixed(1)+o+"&nbsp;&nbsp;"+parseFloat(p.data[1]).toFixed(2)+i}}})}}}}}var h=echarts.init(k);h.setOption({tooltip:{trigger:"item"},title:{text:v,left:"center"},animation:false,xAxis:{name:a,type:"value",axisLabel:{show:e},nameLocation:"center",nameGap:25},yAxis:{name:c,axisLabel:{formatter:function(w,p){return Math.abs(w)}},inverse:d,type:"value",nameLocation:"center",nameGap:40},series:n},true)}function slgtCurve(g,j,a){if(j.length==0){a.innerHTML="<font color='red'>\u6570\u636e\u4e0d\u8db3\uff0c\u65e0\u6cd5\u663e\u793a\u66f2\u7ebf</font>";a.setAttribute("_echarts_instance_","");return}var q={};var f={};j.forEach(function(u,p){if(u.loadDirect==1){var x=u.loading+"";if(u.timeCount>0){if(g.testType==1){var s=[getBaseLog(10,u.timeCount),u.totald,u.timeCount,u.loading];if(q.hasOwnProperty(x)){var r=q[x];r.push(s);q[x]=r}else{q[x]=[s]}}else{if(g.testType==2||g.testType==3){var s=[getBaseLog(10,u.timeCount),u.totalu,u.timeCount,u.loading];if(f.hasOwnProperty(x)){var r=f[x];r.push(s);f[x]=r}else{f[x]=[s]}}else{if(g.testType==4){var w=[getBaseLog(10,u.timeCount),(-1)*u.totalu,u.timeCount,u.loading];if(f.hasOwnProperty(x)){var r=f[x];r.push(w);f[x]=r}else{f[x]=[w]}var t=[getBaseLog(10,u.timeCount),u.totald,u.timeCount,u.loading];if(q.hasOwnProperty(x)){var r=q[x];r.push(t);q[x]=r}else{q[x]=[t]}}else{if(g.testType==11){}else{if(g.testType==12){var t=[u.timeCount,u.totald,u.loading];if(q.hasOwnProperty(x)){var r=q[x];r.push(t);q[x]=r}else{q[x]=[t]}}else{var s=[getBaseLog(10,u.timeCount),u.totald,u.timeCount,u.loading];if(q.hasOwnProperty(x)){var r=q[x];r.push(s);q[x]=r}else{q[x]=[s]}}}}}}}}});var c=5;var n="s-lgt\u66f2\u7ebf";var k=getTestUnitName(g);var d="lgt (min)";var i="s (mm)";var h="mm";var e=true;var m=false;if(g.testType==2||g.testType==3){n="\u03b4-lgt\u66f2\u7ebf";i="\u03b4 (mm)";e=false}else{if(g.testType==12){n="YO-lgt\u66f2\u7ebf";i="lgYO (mm)";e=false;m=true}}var l=[];if(g.testType==1){for(var b in q){l.push({name:b,type:"line",symbol:"circle",smooth:false,symbolSize:c,itemStyle:{normal:{color:"blue",lineStyle:{color:"blue"}}},data:q[b],tooltip:{formatter:function(p){return p.data[3]+k+"<br> "+p.data[2]+" min&nbsp;&nbsp;"+p.data[1]+h}}})}}else{if(g.testType==2||g.testType==3){for(var b in f){l.push({name:b,type:"line",symbol:"circle",smooth:false,symbolSize:c,itemStyle:{normal:{color:"blue",lineStyle:{color:"blue"}}},data:f[b],tooltip:{formatter:function(p){return p.data[3]+k+"<br> "+p.data[2]+" min&nbsp;&nbsp;"+p.data[1]+h}}})}}else{if(g.testType==4){for(var b in q){l.push({name:b,type:"line",symbol:"triangle",smooth:false,symbolSize:c,itemStyle:{normal:{color:"red",lineStyle:{color:"red"}}},data:q[b],tooltip:{formatter:function(p){return"\u5411\u4e0b"+p.data[3]+k+"<br> "+p.data[2]+" min&nbsp;&nbsp;"+p.data[1]+h}}})}for(var b in f){l.push({name:b,type:"line",symbol:"circle",smooth:false,symbolSize:c,itemStyle:{normal:{color:"blue",lineStyle:{color:"blue"}}},data:f[b],tooltip:{formatter:function(p){return"\u5411\u4e0a"+p.data[3]+k+"<br> "+p.data[2]+" min&nbsp;&nbsp;"+Math.abs(p.data[1])+h}}})}}else{if(g.testType==12){for(var b in q){l.push({name:"\u52a0\u8f7d\u5411\u4e0b",type:"line",symbol:"circle",smooth:false,symbolSize:c,itemStyle:{normal:{color:"blue",lineStyle:{color:"blue"}}},data:q[b],tooltip:{formatter:function(p){return"\u52a0\u8f7d: "+p.data[2]+k+"<br>"+p.data[0]+"min&nbsp;&nbsp;"+p.data[1]+h}}})}}else{for(var b in q){l.push({name:"\u52a0\u8f7d",type:"line",symbol:"circle",smooth:false,symbolSize:c,itemStyle:{normal:{color:"blue",lineStyle:{color:"blue"}}},data:q[b],tooltip:{formatter:function(p){return"\u52a0\u8f7d:"+p.data[3]+k+"<br> "+parseFloat(p.data[2]).toFixed(1)+"min&nbsp;&nbsp;"+parseFloat(p.data[1]).toFixed(2)+h}}})}}}}}var o=echarts.init(a);o.setOption({tooltip:{trigger:"item"},title:{text:n,left:"center"},animation:false,xAxis:{name:d,type:"value",axisLabel:{show:m},nameLocation:"center",nameGap:25},yAxis:{name:i,axisLabel:{formatter:function(r,p){return Math.abs(r)}},inverse:e,type:"value",nameLocation:"center",nameGap:25},series:l},true)}function getBaseLog(a,b){return parseFloat((Math.log(b)/Math.log(a)).toFixed(2))}function toDecimal(c,e,d){if(!isEmpty(c)){if(!/^\d+(\.\d+)?$|^-\d+(\.\d+)?$/.test(c)){return c}var g=1;for(var b=0;b<e;b++){g=g*10}c=Math.round(c*g)/g;var f=c.toString();if(d){var a;if(f.indexOf(".")==-1){a=e;f+="."}else{a=e-((f.length-1)-f.indexOf("."))}for(var b=0;b<a;b++){f+="0"}}return f}return c}function isEmpty(a){if((a==null||typeof(a)=="undefined")||(typeof(a)=="string"&&a==""&&a!="undefined")||JSON.stringify(a)=="{}"||(Array.isArray(a)&&a.length==0)){return true}else{return false}}function getTestUnitName(c){var d="kN";var b=c.testUnit;if(b==0){d="kN"}else{if(b==1){d="kPa"}else{var a=c.testType;if(c.testType==1||c.testType==2||c.testType==3||c.testType==4||c.testType==11||c.testType==12){d="kN"}else{if(c.testType==5||c.testType==6||c.testType==7||c.testType==8||c.testType==9||c.testType==10){d="kPa"}}}}return d}function detailsDataShow(j,a){var d={header:[],data:[]};var k=detailDataCal(j,a);var g=[];var e=[];var c=[];var b=[];k.header.forEach(function(i){if(i.children){i.colspan=i.children.length;e.push(i);i.children.forEach(function(m){c.push(m);b.push(m.name)})}else{i.rowspan=2;e.push(i);b.push(i.name)}});g.push(e);g.push(c);d.header=g;d.data.data=k.data;var l=0;var h=[];for(var f=0;f<k.data.length;f++){if(f===0){h.push(1);l=0}else{if(k.data[f].loading===k.data[f-1].loading){h[l]+=1;h.push(0)}else{h.push(1);l=f}}}k.data.forEach(function(m,i){var n=[];b.forEach(function(o){for(var q in m){if(o==q){var p=m[q];if(h[i]>0&&q=="loading"){n.push({v:p,rowspan:h[i],loadDirect:m.loadDirect})}else{if(h[i]==0&&q=="loading"){}else{n.push({v:p,loadDirect:m.loadDirect})}}}}});d.data.push(n)});return d}function totalDataShow(i,c){var e={header:[],data:[]};var j=detailDataCal(i,c);var g=totalDataCal(i,j.data);var h=[];var f=[];var d=[];var b=[];var a=[];if(i.testType==11){f.push({lable:"\u5e8f\u53f7",name:"",rowspan:3});g.header.forEach(function(k){if(k.children){k.colspan=k.children.length;k.children.forEach(function(l){if(l.children){l.colspan=l.children.length;d.push(l);l.children.forEach(function(m){b.push(m);a.push(m.name)});k.colspan=k.children.length+l.children.length}else{l.rowspan=2;d.push(l);a.push(l.name)}});f.push(k)}else{k.rowspan=3;f.push(k);a.push(k.name)}});h.push(f);h.push(d);h.push(b);e.header=h}else{f.push({lable:"\u5e8f\u53f7",name:"",rowspan:2});g.header.forEach(function(k){if(k.children){k.colspan=k.children.length;f.push(k);k.children.forEach(function(l){d.push(l);a.push(l.name)})}else{k.rowspan=2;f.push(k);a.push(k.name)}});h.push(f);h.push(d);e.header=h}g.data.forEach(function(l,k){var m=[];a.forEach(function(n){for(var p in l){if(n==p){var o=l[p];m.push({v:o,loadDirect:l.loadDirect})}}});e.data.push(m)});return e}function loadDataShow(c,d){var b=detailDataCal(c,d);var a=loadOrUnloadDataCal(c,b.data,1);return a}function unLoadDataShow(b,c){var a=detailDataCal(b,c);var d=loadOrUnloadDataCal(b,a.data,0);return d}function curveShow(f,b,a){var a=document.getElementById(a);if(isEmpty(b)){a.innerHTML="<font color='red'>\u6570\u636e\u4e0d\u8db3\uff0c\u65e0\u6cd5\u663e\u793a\u66f2\u7ebf</font>";return}var i="1500px";var e="500px";a.style.width=i;a.style.height=e;a.innerHTML=setDiv(f,a);var c=document.getElementById("static_qs");var h=document.getElementById("static_slgq");var d=detailDataCal(f,b);qsCurve(vm.basicInfo,d.data,c);slgqCurve(vm.basicInfo,d.data,h);if(vm.basicInfo.testType!=11){var g=document.getElementById("static_slgt");slgtCurve(vm.basicInfo,d.data,g)}}function setDiv(c,g){var f=g.style.width;var a=g.style.height;width1=parseFloat(f)/3-10;width1=width1+"px";var e='<div id="static_qs" style="width:'+width1+";height:"+a+';float:left"></div>';var d='<div id="static_slgq" style="width:'+width1+";height:"+a+';float:left"></div>';var b='<div id="static_slgt" style="width:'+width1+";height:"+a+';float:left"></div>';if(c.testType!=11){return e+d+b}else{return e+d}}function getTestTypeName(b){var a="";switch(parseInt(b.testType)){case 1:a="\u5355\u6869\u7ad6\u5411\u6297\u538b";break;case 2:a="\u5355\u6869\u7ad6\u5411\u6297\u62d4";break;case 3:a="\u5ca9\u77f3\u951a\u6746\u6297\u62d4";break;case 4:a="\u81ea\u5e73\u8861";break;case 5:a="\u590d\u5408\u5730\u57fa";break;case 6:a="\u6d45\u5c42\u5e73\u677f";break;case 7:a="\u6df1\u5c42\u5e73\u677f";break;case 8:a="\u539f\u4f4d\u8bd5\u9a8c_\u571f\u5c42";break;case 9:a="\u539f\u4f4d\u8bd5\u9a8c_\u5ca9\u57fa";break;case 10:a="\u5ca9\u57fa\u8377\u8f7d";break;case 11:a="\u6c34\u5e73\u9759\u8f7d\u5faa\u73af\u6cd5";break;case 12:a="\u6c34\u5e73\u9759\u8f7d\u7ef4\u6301\u8377\u8f7d\u6cd5";break}return a}function getMaxSensorValue(b){var a=0;b.forEach(function(c){var d=c.sensorValue.split(",");d.forEach(function(e){if(parseFloat(e)!=-66&&parseFloat(e)>a){a=e}})});return a};
